# GraphQL Query to List All Builders Projects
# Use this in the GraphQL playground at: https://ponder-builders-v4-base.up.railway.app

query GetAllBuildersProjects {
  buildersProjects(
    limit: 100
    orderBy: "createdAt"
    orderDirection: "desc"
  ) {
    items {
      id
      name
      admin
      claimAdmin
      totalStaked
      totalUsers
      totalClaimed
      minimalDeposit
      withdrawLockPeriodAfterDeposit
      claimLockEnd
      startsAt
      chainId
      contractAddress
      createdAt
      createdAtBlock
      slug
      description
      website
      image
      builderUsers {
        totalCount
        items {
          id
          address
          staked
          claimed
        }
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    totalCount
  }
}

# Alternative: Get projects with filters
query GetProjectsWithFilters {
  buildersProjects(
    where: {
      # Filter by chain ID (Base = 8453)
      chainId: 8453
      # Optional: Filter by minimum staked amount
      # totalStaked_gte: "1000000000000000000"  # 1 MOR token (18 decimals)
    }
    limit: 50
    orderBy: "totalStaked"
    orderDirection: "desc"
  ) {
    items {
      id
      name
      slug
      admin
      claimAdmin
      totalStaked
      totalUsers
      totalClaimed
      minimalDeposit
      slug
      description
      website
      image
      createdAt
    }
    totalCount
  }
}

# Query to get a specific project by ID
query GetProjectById($projectId: String!) {
  buildersProject(id: $projectId) {
    id
    name
    admin
    claimAdmin
    totalStaked
    totalUsers
    totalClaimed
    minimalDeposit
    withdrawLockPeriodAfterDeposit
    claimLockEnd
    startsAt
    chainId
    contractAddress
    createdAt
    createdAtBlock
    slug
    description
    website
    image
    builderUsers(limit: 10, orderBy: "staked", orderDirection: "desc") {
      items {
        id
        address
        staked
        claimed
        lastStake
        claimLockEnd
        lastDeposit
        virtualDeposited
      }
      totalCount
    }
    events(limit: 10, orderBy: "blockTimestamp", orderDirection: "desc") {
      items {
        id
        eventType
        amount
        userAddress
        blockNumber
        blockTimestamp
        transactionHash
      }
      totalCount
    }
  }
}

# Variables for GetProjectById:
# {
#   "projectId": "0x1234567890abcdef1234567890abcdef12345678"
# }

