# Environment Variables for Arbitrum Mainnet Indexer
# Copy this file to .env or set these variables in your deployment platform

# =============================================================================
# REQUIRED VARIABLES
# =============================================================================

# PostgreSQL Database Connection
# Format: postgresql://username:password@host:port/database?sslmode=require
# 
# ✅ SHARED DATABASE SUPPORT: You can use the SAME DATABASE_URL across all indexer apps!
#    Each app will use a different DATABASE_SCHEMA to isolate its tables.
#    Example: All three apps (Base Sepolia, Arbitrum Mainnet, Base Mainnet) can share
#    the same Railway PostgreSQL database instance.
#
# For Railway: Use the DATABASE_URL from your Railway PostgreSQL service
# For DigitalOcean App Platform: Use ${db.DATABASE_URL} when database component is linked
DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require

# Database Schema Name
# ⚠️ IMPORTANT: Each indexer app MUST use a UNIQUE schema name!
# This isolates tables/data between different indexers sharing the same database.
# 
# Recommended naming convention:
# - builders_v4_base_sepolia (for Base Sepolia indexer)
# - builders_v4_arbitrum_mainnet (for Arbitrum Mainnet indexer)
# - builders_v4_base_mainnet (for Base Mainnet indexer)
#
# For DigitalOcean App Platform: Use $APP_DEPLOYMENT_ID for automatic unique schemas per deployment
DATABASE_SCHEMA=builders_v4_arbitrum_mainnet

# Arbitrum Mainnet RPC Endpoint (Chain ID: 42161)
# REQUIRED: Must provide a reliable RPC endpoint
# Recommendation: Use a paid RPC provider (Alchemy, Infura, QuickNode) for production
# Example: https://arb-mainnet.g.alchemy.com/v2/YOUR_API_KEY
PONDER_RPC_URL_42161=https://arb-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# =============================================================================
# OPTIONAL VARIABLES
# =============================================================================

# Port number for HTTP server
# Default: 42069 (Ponder's default)
# Note: Railway/DigitalOcean usually sets this automatically
PORT=42069

# Log level for Ponder
# Values: trace, debug, info, warn, error
# Default: info
PONDER_LOG_LEVEL=info

# =============================================================================
# CONTRACT CONFIGURATION (from ponder.config.ts)
# =============================================================================
# These addresses are configured in ponder.config.ts but can be overridden here if needed

# Builders Contract (Arbitrum Mainnet)
# Address: 0xC0eD68f163d44B6e9985F0041fDf6f67c6BCFF3f
# Start Block: 18000000 (APPROXIMATE - VERIFY THIS)

# MOR Token Contract (Arbitrum Mainnet)
# Address: 0x092bAaDB7DEf4C3981454dD9c0A0D7FF07bCFc86
# Start Block: 17500000 (APPROXIMATE - VERIFY THIS)

# L2Factory Contract (Arbitrum Mainnet only)
# Address: 0x890bfa255e6ee8db5c67ab32dc600b14ebc4546c
# Start Block: 18000000 (APPROXIMATE - VERIFY THIS)

# SubnetFactory Contract (Arbitrum Mainnet only)
# Address: 0x37b94bd80b6012fb214bb6790b31a5c40d6eb7a5
# Start Block: 18000000 (APPROXIMATE - VERIFY THIS)

# DynamicSubnet contracts are created dynamically via factory pattern
# No static address needed - handled by factory event tracking

# =============================================================================
# IMPORTANT NOTES
# =============================================================================
# 
# ⚠️  MISSING/VERIFICATION NEEDED:
# 
# 1. START BLOCKS: All start blocks are marked as "approximate" in the config.
#    You MUST verify the actual deployment blocks for:
#    - Builders contract: Currently set to 18000000
#    - MOR Token: Currently set to 17500000
#    - L2Factory: Currently set to 18000000
#    - SubnetFactory: Currently set to 18000000
#
# 2. RPC ENDPOINT: PONDER_RPC_URL_42161 is REQUIRED and must be set.
#    The config includes fallback public RPCs, but for production you should
#    use a paid provider to avoid rate limiting.
#
# 3. DATABASE: Both DATABASE_URL and DATABASE_SCHEMA are REQUIRED.
#    Ensure your database is set up and accessible before deployment.
#
# 4. ARBITRUM-SPECIFIC CONTRACTS: This deployment includes contracts that
#    Base mainnet does NOT have:
#    - L2Factory (creates builder subnets)
#    - SubnetFactory (creates subnet instances)
#    - DynamicSubnet (dynamically created contracts)
#
# =============================================================================

